:root{
  --bg:#0b0e15;
  --fg:#e8ecf3;
  --muted:#9aa3b2;
  --accent:#525b72;
  --btn-radius:12px;
  --btn-h:36px;
  --gap:20px;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background:var(--bg);
  color:var(--fg);
  font:14px/1.4 system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
}
#app{min-height:100vh; display:grid; place-items:center; padding:24px; gap:24px}

#wrapper{position:relative;}
#preview{
  position:relative;
  border-radius:16px;
  background:#111;
}
#preview::after{
  content:"";
  position:absolute; inset:-8px;
  border:2px dashed rgba(255,255,255,.25);
  border-radius:20px;
  pointer-events:none;
}

#bgImg, #ovImg{
  position:absolute; inset:0;
  width:100%; height:100%;
  object-fit:contain;
  border:none; outline:none;
  background:transparent;
}
#ovImg.overlay{ pointer-events:none; transition:opacity .2s ease; }
#ovImg.overlay.dim{ opacity:.8; }

#lotStage{
  position:absolute;
  left:50%; top:50%;
  transform:translate(-50%,-50%);
  outline:1px dashed rgba(255,255,255,.4);
  user-select:none;
  touch-action:none;
  cursor:grab;
}
#lotStage.dragging{ outline:2px dashed rgba(255,255,255,.8); cursor:grabbing; }
#lottie{ width:100%; height:100%; }

.placeholder{
  position:absolute; inset:0;
  display:grid; place-items:center;
  pointer-events:none;
}
.placeholder .ph-inner{ text-align:center; line-height:1.3 }
.placeholder .ph-line{ color:var(--muted); font-size:13px }
.placeholder .ph-line.b{ color:#fff; font-weight:600 }

.drop-overlay{
  display:none;
  position:absolute; inset:0;
  background:rgba(0,0,0,.5);
  border-radius:16px;
}
.drop-overlay .drop-msg{
  position:absolute; left:50%; top:50%; transform:translate(-50%,-50%);
  padding:10px 14px; border-radius:10px;
  background:rgba(0,0,0,.6);
  color:#fff; font-weight:600; font-size:13px;
}
body.dragging .drop-overlay{ display:block; }

.controls{
  width:min(1000px, calc(100vw - 32px));
  display:flex; align-items:center; justify-content:space-between;
  gap:12px; flex-wrap:wrap;
  margin-top:calc(var(--gap) * 2);
}
.controls .left, .controls .right{ display:flex; gap:8px; align-items:center; }

.btn{
  height:var(--btn-h);
  padding:0 14px;
  border-radius:var(--btn-radius);
  border:1px solid rgba(255,255,255,.12);
  background:#1b2030;
  color:#fff;
  font-size:13px; font-weight:600;
  letter-spacing:.2px;
  display:inline-flex; align-items:center; gap:8px;
  cursor:pointer;
}
.btn:hover{ background:#252b40 }
.btn.primary{ background:var(--accent); border-color:transparent; }
.btn.primary:hover{ background:#5e6886 }
.btn.ghost{ background:#141925; }

.chk{
  display:inline-flex; align-items:center; gap:6px;
  height:var(--btn-h); padding:0 8px;
  color:#fff; background:#141925; border:1px solid rgba(255,255,255,.12);
  border-radius:var(--btn-radius);
  font-size:13px;
}
.chk input{ transform:scale(1.1) }

.pos-hud{
  position:fixed; left:16px; bottom:16px;
  background:#0f1320; color:#b7c0d1;
  padding:6px 10px; border-radius:10px;
  font-size:12px;
  opacity:.9;
}
.is-mobile .pos-hud{ display:none; }

.toast{
  position:fixed; transform:translateX(-50%);
  padding:8px 12px; background:#0f1320; color:#fff; border-radius:8px;
  font-size:13px; pointer-events:none; opacity:0; transition:.18s;
  left:50%; top:calc(100% - 32px);
}
.toast.show{ opacity:1 }

.ver{
  position:fixed; right:12px; bottom:12px; opacity:.6; font-size:12px;
}
.is-mobile .ver{ display:none; }

/* === Fullscreen (PWA standalone) === */
html.standalone, body.standalone {
  height: 100svh;
  background: #000;
  overflow: hidden;
}
body.standalone {
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
  padding-top: env(safe-area-inset-top);
  padding-bottom: env(safe-area-inset-bottom);
}
body.standalone .controls { display: none !important; }
body.standalone #wrapper {
  position: fixed;
  inset: 0;
  display: grid;
  place-items: center;
  background: #000;
}
body.standalone #preview {
  max-width: 100vw;
  max-height: 100svh;
}
